# CHANGELOG - Все изменения в системе переводов

## v1.0 - 2026-02-03 - INITIAL TRANSLATIONS SYSTEM

### Добавленные ключи переводов (IDs 100.1-100.10 и 101.1-101.7)
- **ID 100.1** `exam_name` - Заголовок экзамена (Exam / Экзамен / בחינה)
- **ID 100.2** `question_number` - "Question" / "Вопрос" / "שאלה" (используется в exam_script.js:282)
- **ID 100.3** `of` - "of" / "из" / "מתוך" (используется для "Question 1 of 10")
- **ID 100.4** `previous` - "Previous" / "Назад" / "הקודם" (кнопка Назад + стрелка ← в JS)
- **ID 100.5** `next` - "Next" / "Далее" / "הבא" (кнопка Далее + стрелка → в JS)
- **ID 100.6** `submit_exam` - "Submit Exam" / "Отправить экзамен" / "שלח בחינה"
- **ID 100.7** `start_exam` - "Start Exam" / "Начать экзамен" / "התחל בחינה"
- **ID 100.8** `warning_do_not_leave` - Warning message на начале экзамена
- **ID 100.9** `answer` - "Answer" / "Ответ" / "תשובה"
- **ID 100.10** `correct_answer` - "Correct Answer" / "Правильный ответ" / "תשובה נכונה"

### Добавленные ключи для студенческой формы (IDs 101.1-101.7) - 2026-02-03
- **ID 101.1** `exam_instructions` - "Instructions:" / "Инструкции:" / "הוראות:"
- **ID 101.2** `enter_name_above` - "Enter your name above" / "Введите ваше имя выше" / "הכנס את שמך למעלה"
- **ID 101.3** `click_start_exam_instruction` - "Click START EXAM - exam will load immediately" / ...
- **ID 101.4** `answer_all_questions_instruction` - "Answer all questions" / "Ответьте на все вопросы" / ...
- **ID 101.5** `click_submit_instruction` - "Click SUBMIT when finished" / "Нажмите ОТПРАВИТЬ..." / ...
- **ID 101.6** `exam_completed` - "Exam Completed" / "Экзамен завершен" / "בחינה הושלמה"
- **ID 101.7** `exam_submitted_successfully` - "your exam was submitted successfully" / "ваш экзамен был успешно отправлен" / ...

### Файлы которые были ОБНОВЛЕНЫ

#### Backend (Python)
- **app.py** - Добавлена функция `detect_exam_language()` для автоматического определения языка
  - Строка ~710: новая функция
  - Возвращает 'he', 'ru' или 'en' на основе анализа текста
  - API `/api/exam/<filename>` теперь возвращает поле 'language'

#### Frontend (JavaScript)
- **exam_script.js** - Обновления для загрузки языка:
  - Функция `loadExamQuestions()` (строка 209) - теперь получает язык из API
  - Функция `updateTranslations()` (строка 57) - добавляет стрелки к кнопкам
  - Функция `displayCurrentQuestion()` (строка 282) - выводит номер вопроса с переводом
  - RTL поддержка: `document.documentElement.dir = 'rtl'` для иврита

#### HTML Templates
- **exam.html**
  - Добавлены ремарки для всех i18n ключей
  - Кнопки навигации (Previous/Next) заполняются динамически в JS
  - Стрелки (← и →) не переводятся, добавляются в updateTranslations()

- **student_exam_session.html** ← ОБНОВЛЕНО в v1.0.1
  - Добавлены i18n атрибуты на все hardcoded тексты:
    - Labels: "First Name *", "Last Name *" теперь переводятся
    - Button: "START EXAM" теперь переводится
    - Instructions block: все 5 инструкций переводятся (IDs 101.1-101.5)
    - Result messages: "Exam Completed", "submitted successfully" переводятся (IDs 101.6-101.7)

#### CSS
- **rtl.css** - Добавлены новые правила для RTL экзамена:
  - `.question-block` - граница справа вместо слева
  - `.question-number` - выравнивание текста справа
  - `.option` - flex направление reverse
  - `.option input` - отступ слева вместо справа

#### Переводы (JSON)
- **en.json** - Добавлены ключи 100.1-100.10
- **ru.json** - Добавлены ключи 100.1-100.10
- **he.json** - Добавлены ключи 100.1-100.10

### Особенности реализации

#### Автоматическое определение языка
- Сервер анализирует текст экзамена
- Если > 10% иврит → язык 'he' (RTL)
- Если > 10% кириллица → язык 'ru' (LTR)
- Иначе → язык 'en' (LTR)

#### Динамические стрелки
- Стрелки ← и → добавляются в JavaScript функции `updateTranslations()`
- Не переводятся между языками
- Исходный HTML содержит только текст кнопки в `<span>`

#### RTL поддержка для иврита
- При загрузке экзамена на иврите: `document.documentElement.dir = 'rtl'`
- CSS автоматически применяет правила из `rtl.css`
- Вопросы и опции выравниваются справа

### Документация

Добавлены три файла документации в `data/translations/`:
1. **TRANSLATIONS_INDEX.md** - Полная индексация всех ключей (пронумерованные IDs)
2. **SCHEMA.js** - Описание структуры JSON файлов
3. **ADD_NEW_LANGUAGE.md** - Инструкция по добавлению новых языков

### Тестирование требуется

- [ ] Экзамен на английском (LTR, кнопки слева-справа)
- [ ] Экзамен на русском (LTR, кнопки слева-справа)
- [ ] Экзамен на иврите (RTL, кнопки справа-слева)
- [ ] Переключение языка через селектор
- [ ] Footer "YaM SOFT ©" на всех языках

---

## ВАЖНЫЕ ЗАМЕЧАНИЯ

- Словари переводов НЕ ПОРТИЛИСЬ, все старые ключи сохранены
- Добавлены только новые ключи (100.1-100.10)
- Все использования hardcoded текстов задокументированы с ремарками
- Система готова к расширению (добавлению новых языков)

---

## Следующие этапы (если нужны)

1. Добавить переводы для остальных страниц (Dashboard, Results, etc.)
2. Добавить новые языки (испанский, французский и т.д.)
3. Добавить переводы для сообщений об ошибках
4. Локализация датежей и времени по языкам

